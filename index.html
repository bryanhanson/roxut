<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document Unit Tests Roxygen-Style • roxut</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Document Unit Tests Roxygen-Style">
<meta property="og:description" content="Much as roxygen2 allows one to document functions in the same file as the function itself, roxut  allows one to write the unit tests in the same file as the function.  Once processed, the unit tests are moved to the appropriate directory.  Currently supports testthat and tinytest frameworks. The roxygen2 package provides much of the infrastructure.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">roxut</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bryanhanson/roxut/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div class="section level2">
<h2 id="what-is-roxut">What is <code>roxut</code>?<a class="anchor" aria-label="anchor" href="#what-is-roxut"></a>
</h2>
<p>Much as <code>roxygen2</code> allows one to document functions in the same file as the function itself, <code>roxut</code> allows one to write the unit tests in the same file as the function. Once processed, the unit tests are moved to the appropriate directory. Currently supports <code>testthat</code> and <code>tinytest</code> frameworks. Relies on and extends the <code>roxygen2</code> system.</p>
<p>Full Disclosure: Mikkel Meyer Andersen had this idea already, back in July 2019! His <a href="https://cran.r-project.org/package=roxytest" class="external-link">roxytest</a> package takes care of unit tests in a manner similar to <code>roxut</code> and also includes some additional useful roclets. Note to self: look around more fully before starting a new package!</p>
<div class="section level3">
<h3 id="installing-roxut-from-cran">Installing <code>roxut</code> from CRAN:<a class="anchor" aria-label="anchor" href="#installing-roxut-from-cran"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/chooseCRANmirror.html" class="external-link">chooseCRANmirror</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># choose a CRAN mirror</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"roxut"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/bryanhanson/roxut" class="external-link">"roxut"</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="installing-roxut-from-github">Installing <code>roxut</code> from Github:<a class="anchor" aria-label="anchor" href="#installing-roxut-from-github"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://remotes.r-lib.org" class="external-link">"remotes"</a></span><span class="op">)</span></span>
<span><span class="fu">install_github</span><span class="op">(</span>repo <span class="op">=</span> <span class="st">"bryanhanson/roxut@main"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/bryanhanson/roxut" class="external-link">"roxut"</a></span><span class="op">)</span></span></code></pre></div>
<p>If you use <code>@some_other_branch</code> you can download other branches that might be available. They may or may not pass CRAN checks and thus may not install automatically using the method above. Check the NEWS file to see what’s up.</p>
</div>
<div class="section level3">
<h3 id="using-roxut">Using <code>roxut</code>
<a class="anchor" aria-label="anchor" href="#using-roxut"></a>
</h3>
<p>To use <code>roxut</code>, write your unit tests in the function definition file, much as you would write your examples and other <code>roxygen2</code> tags:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' ... snip: documentation using tags</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">#' @tests tinytest # or testthat</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' expect_equal(blah blah blah)</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' expect_true(blah blah blah)</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' ... snip: more documentation using tags</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="cf">function</span>() {do something}</span></code></pre></div>
<p>You will also need to put a driver script in the appropriate directory. For example <code>tinytest</code> requires <code>...PkgName/tests/tinytest.R</code> and <code>testthat</code> requires <code>...PkgName/tests/unittest.R</code>. See the corresponding package documentation for details about the necessary files.</p>
<p>When <code>roxut</code> reads a file called <code>myFunction.R</code> containing <code>@tests</code> tags, it creates a file called <code>test-myFunction.R</code> in the directory containing the unit tests. <em>This file is overwritten each time you run <code>roxut</code> if it was previously created by <code>roxut</code></em> (this is the same behavior as <code>roxygen2</code> on <code>*.Rd</code> files).</p>
<p>You can use both <code>roxut</code> and manually created, dedicated unit test files simultaneously, as long as the manually created files avoid using the file names used by <code>roxut</code>. You can also have any other files you like in the directory holding the unit tests, such as files that generate test data.</p>
<p>To run <code>roxut</code> set the working directory to the root of the package and do:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/bryanhanson/roxut" class="external-link">"roxut"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenize</a></span><span class="op">(</span>roclets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rd"</span>, <span class="st">"collate"</span>, <span class="st">"namespace"</span>, <span class="st">"tests_roclet"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>You can also run specific roclets if you don’t want them all. When you <code><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenize()</a></code>, the contents of the <code>@tests</code> block are copied to files in the necessary directory. You can also use <code>document()</code> in place of <code><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenize()</a></code>.</p>
<p>If you are writing a package, put the following line in your <code>DESCRIPTION</code> file:</p>
<pre><code><span><span class="va">Roxygen</span><span class="op">:</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>roclets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"collate"</span>, <span class="st">"namespace"</span>, <span class="st">"rd"</span>, <span class="st">"roxut::tests_roclet"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>and then if you build and check via a <code>make</code> file or similar steps when <code><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenize()</a></code> or <code>document()</code> is called the <code>tests_roclet</code> will automatically be applied. Good stuff from the developers of <code>roxygen2</code>!</p>
</div>
<div class="section level3">
<h3 id="developerscontributorstesters">Developers/Contributors/Testers<a class="anchor" aria-label="anchor" href="#developerscontributorstesters"></a>
</h3>
<p><code>tinytest</code> is used to perform unit tests of <code>roxut</code>. In this case, there is a test package at <code>roxut/inst/tinytest/roxutTestPkg</code>. When <code>roxut</code> is checked, this test package is used for testing <code>roxut</code>, and it is also built and checked to verify everything worked. The process is controlled by <code>roxut/inst/tinytest/test_roxutTestPkg.R</code>; have a look! See also the unit tests in <code>tests_roclet.R</code>.</p>
</div>
<div class="section level3">
<h3 id="license-information">License Information<a class="anchor" aria-label="anchor" href="#license-information"></a>
</h3>
<p><code>roxut</code> is distributed under the GPL-3 license, as stated in the DESCRIPTION file. For more info, see the <a href="https://gnu.org/licenses/gpl.html" class="external-link">GPL site.</a></p>
<p>Questions? <a href="mailto:hanson@depauw.edu" class="email">hanson@depauw.edu</a></p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=roxut" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/bryanhanson/roxut/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/bryanhanson/roxut/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing roxut</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Bryan A. Hanson <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3536-8246" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Hadley Wickham <br><small class="roles"> Author, copyright holder </small>  </li>
<li>Peter Danenberg <br><small class="roles"> Author, copyright holder </small>  </li>
<li>Gábor Csárdi <br><small class="roles"> Author </small>  </li>
<li>Manuel Eugster <br><small class="roles"> Author, copyright holder </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://cran.r-project.org/package=roxut" class="external-link"><img src="https://www.r-pkg.org/badges/version-last-release/roxut" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/package=roxut" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/roxut" alt="metacran downloads"></a></li>
<li><a href="https://cran.r-project.org/package=roxut" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/roxut" alt="metacran downloads"></a></li>
<li><a href="https://github.com/bryanhanson/roxut/actions" class="external-link"><img src="https://github.com/bryanhanson/roxut/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Bryan A. Hanson, Hadley Wickham, Peter Danenberg, Gábor Csárdi, Manuel Eugster.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
